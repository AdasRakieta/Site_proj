/* ============================== */
/*        MOBILE MEDIA QUERIES    */
/* ============================== */
/* Comprehensive mobile styles for SmartHome application */
/* Optimized for devices with max-width: 768px */

@media (max-width: 768px) {
    
    /* ============================== */
    /*    1. GLOBAL & BODY STYLES     */
    /* ============================== */
    
    body {
        padding: 0 !important;
        margin: 0 !important;
        overflow-x: hidden !important;
    }
    
    main {
        padding: 1rem !important;
        margin: 0 !important;
    }
    
    /* ============================== */
    /*    2. LAYOUT & CONTAINERS      */
    /* ============================== */
    
    .container,
    .main-container {
        width: 100% !important;
        max-width: 100vw !important;
        padding: 10px !important;
        margin: 0 !important;
        box-sizing: border-box !important;
    }
    
    .center-container {
        flex-direction: column !important;
        align-items: center !important;
        width: 100% !important;
        padding: 10px !important;
        gap: 15px !important;
    }
    
    /* ============================== */
    /*    3. GRID SYSTEMS             */
    /* ============================== */
    
    .grid-container,
    .grid-container-list {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
        padding: 10px !important;
        margin: 0 !important;
        width: 100% !important;
    }
    
    /* Grid w trybie edycji - 2 kolumny dla pokoi */
    .rooms-container.wide .grid-container,
    .rooms-container.wide .grid-container-list,
    .edit-mode .grid-container,
    .edit-mode .grid-container-list {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 12px !important;
    }
    
    .grid-container-list h2 {
        font-size: 1.2rem !important;
        margin-bottom: 10px !important;
    }
    
    .dashboard-grid {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
        padding: 10px !important;
    }
    
    /* ============================== */
    /*    4. NAVIGATION & MENU        */
    /* ============================== */
    
    .side-menu {
        width: 220px !important;
        padding-top: 1.5rem !important;
    }
    
    .menu {
        padding-bottom: 80px !important;
    }
    
    .menu-link {
        font-size: 0.9em !important;
        padding: 10px !important;
        margin: 8px 5px !important;
    }
    
    .menu-icon {
        width: 24px !important;
        height: 24px !important;
        margin-right: 8px !important;
    }
    
    .menu-btn {
        font-size: 0.95rem !important;
        padding: 0.75rem !important;
    }
    
    /* User Menu */
    #user-menu {
        transform: scale(1.05) !important;
        top: 65px !important;
        right: 5px !important;
        min-width: 200px !important;
        max-width: 90vw !important;
        z-index: 10001 !important; /* WYŻSZY niż home-selector-dropdown (10000) */
    }
    
    .user-menu-container {
    position: fixed !important;
    top: 0.75rem !important;
    right: 0.75rem !important;
    width: 40px !important;
    height: 40px !important;
    z-index: 10001 !important; /* Zapewnia, że menu będzie nad dropdown */
    }
    
    .user-avatar {
    display: block !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    }
    
    .user-menu-icon {
        width: 24px !important;
        height: 24px !important;
    }
    
    /* Main Menu (gooey menu) */
    .main-menu {
        transform: scale(0.95) !important;
        top:5px
    }
    
    .main-menu.active {
        transform: scale(1) !important;
        width: 320px !important;
        z-index: 1000 !important;
    }
    
    .menu-item {
        font-size: 0.85em !important;
    }
    
    /* Home Selector */
    .home-selector-item {
        width: 100% !important;
        position: relative !important;
    }
    
    .home-selector-dropdown {
        position: fixed !important;
        top: auto !important;
        left: 10px !important;
        right: 10px !important;
        bottom: 10px !important;
        max-height: 60vh !important;
        min-width: auto !important;
        width: calc(100vw - 20px) !important;
        z-index: 10000 !important; /* NIŻSZY niż user-menu (10001) */
    }
    
    .home-selector-actions {
        flex-direction: column !important;
        gap: 8px !important;
    }
    
    .home-action-link {
        width: 100% !important;
        padding: 10px !important;
    }
    
    .current-home-display {
        padding: 10px !important;
    }
    
    .current-home-name {
        font-size: 0.85em !important;
    }
    
    /* ============================== */
    /*    5. HEADER & FOOTER          */
    /* ============================== */
    
    header {
        padding: 0.75rem !important;
        margin-bottom: 0 !important;
    }
    
    header h1 {
        font-size: 1.4rem !important;
    }
    
    .close-btn {
        left: 0.5rem !important;
    }
    
    .menu-toggle {
        width: 35px !important;
        height: 35px !important;
    }
    
    footer {
        margin-bottom: 0 !important;
        padding: 1rem !important;
        font-size: 0.85em !important;
    }
    
    hr,
    hr3 {
        margin: 10px 0 !important;
    }
    
    /* ============================== */
    /*    6. FORMS & INPUTS           */
    /* ============================== */
    
    .form-group,
    .form-group-user,
    .form-group-register {
        min-width: 0 !important;
        width: 100% !important;
        margin-bottom: 15px !important;
        padding: 0 5px !important;
    }
    
    .form-group label,
    .form-group-user label,
    .form-group-register label {
        font-size: 0.9em !important;
        margin-bottom: 6px !important;
    }
    
    .form-control,
    .form-group-user input,
    .form-group-register input,
    input,
    select,
    textarea {
        width: 100% !important;
        max-width: 100% !important;
        font-size: 16px !important; /* Prevents zoom on iOS */
        padding: 12px !important;
        box-sizing: border-box !important;
    }
    
    .input-edit,
    .input-settings,
    .select-edit,
    .select-settings {
        width: 100% !important;
        max-width: 100% !important;
        margin: 5px 0 !important;
    }
    
    .input-settings-add-user,
    .select-settings-add-user {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .input-temp {
        width: 80px !important;
        font-size: 14px !important;
    }
    
    .input-user {
        width: 100% !important;
        margin: 0 auto !important;
    }
    
    /* Form Rows */
    .form-row {
        grid-template-columns: 1fr !important;
        gap: 10px !important;
    }
    
    .form-actions {
        flex-direction: column !important;
        gap: 10px !important;
        width: 100% !important;
    }
    
    .form-actions button,
    .form-actions .btn {
        width: 100% !important;
    }
    
    /* Special Forms */
    .profile-form {
        min-width: 0 !important;
        max-width: 100% !important;
        width: 100% !important;
        padding: 10px !important;
    }
    
    .new-user-form,
    .user-add-form {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 10px !important;
        width: 100% !important;
    }
    
    .user-add-form > * {
        width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .edit-generic-form {
        flex-direction: column !important;
        gap: 10px !important;
        width: 100% !important;
    }
    
    .theme-form,
    .notification-form,
    .notification-inside-form {
        min-width: 0 !important;
        width: 95% !important;
        max-width: 100% !important;
        margin: 10px auto !important;
        padding: 15px !important;
    }
    
    /* Autocomplete */
    .autocomplete-suggestions {
        max-height: 200px !important;
        left: 5px !important;
        right: 5px !important;
        width: calc(100% - 10px) !important;
    }
    
    .suggestion-item {
        padding: 10px 12px !important;
        font-size: 0.9em !important;
    }
    
    .city-name {
        font-size: 0.9em !important;
    }
    
    .city-info {
        font-size: 0.75em !important;
    }
    
    /* ============================== */
    /*    7. BUTTONS                  */
    /* ============================== */
    
    .btn,
    .btn-primary,
    .btn-secondary,
    button {
        font-size: 0.9em !important;
        padding: 12px 15px !important;
        min-height: 44px !important; /* Touch target size */
        box-sizing: border-box !important;
    }
    
    .rooms-button,
    .control-button,
    .map-button {
        width: 100% !important;
        padding: 14px 12px !important;
        font-size: 0.95em !important;
        margin: 8px 0 !important;
        min-height: 48px !important;
        box-sizing: border-box !important;
    }
    
    /* Przyciski w gridzie - jednolite rozmiary */
    .grid-container .rooms-button,
    .grid-container-list .rooms-button,
    .edit-mode .rooms-button {
        padding: 12px 8px !important;
        font-size: 0.9em !important;
        min-height: 44px !important;
        height: auto !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    .small-button,
    .action-btn {
        padding: 10px 12px !important;
        font-size: 0.85em !important;
        min-height: 44px !important;
    }
    
    .save-button {
        width: 100% !important;
        max-width: 300px !important;
        padding: 14px !important;
        font-size: 1em !important;
        min-height: 48px !important;
    }
    
    .return-button {
        width: 100% !important;
        max-width: 300px !important;
        padding: 14px !important;
        min-height: 48px !important;
    }
    
    .form-group-register-buttons {
        flex-direction: column !important;
        width: 100% !important;
        gap: 10px !important;
    }
    
    .form-group-register-buttons .save-button,
    .form-group-register-buttons .return-button {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .logout-btn {
        font-size: 0.85em !important;
        padding: 10px 12px !important;
        margin: 5px !important;
        min-height: 44px !important;
    }
    
    .change-button,
    .delete-button,
    .cancel-button {
        font-size: 0.85em !important;
        padding: 10px 12px !important;
        min-height: 44px !important;
    }
    
    .icon-button {
    width: 48px !important;
    height: 48px !important;
        font-size: 16px !important;
        padding: 0 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
    }
    
    .upload-btn {
        width: 100% !important;
        max-width: 200px !important;
        padding: 12px !important;
        min-height: 44px !important;
    }
    
    #addUserBtn {
        width: 80% !important;
        max-width: 250px !important;
        padding: 12px !important;
        min-height: 44px !important;
    }
    
    /* ============================== */
    /*    8. TABLES                   */
    /* ============================== */
    
    .user-table-container,
    .users-table-wrapper {
        overflow-x: auto !important;
        width: 100% !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    .user-table,
    .users-table {
        min-width: 600px !important;
        width: 100% !important;
        font-size: 0.85em !important;
    }
    
    .user-table th,
    .user-table td,
    .users-table th,
    .users-table td {
        padding: 8px 6px !important;
        font-size: 0.85em !important;
        word-break: break-word !important;
    }
    
    .action-buttons {
        flex-direction: column !important;
        gap: 6px !important;
        width: 100% !important;
    }
    
    .action-buttons .action-btn {
        width: 100% !important;
    }
    
    .user-avatar-small {
        width: 32px !important;
        height: 32px !important;
    }
    
    .user-avatar-placeholder {
        width: 32px !important;
        height: 32px !important;
        font-size: 14px !important;
    }
    
    /* ============================== */
    /*    9. CARDS & SECTIONS         */
    /* ============================== */
    
    .dashboard-card,
    .settings-section,
    .stat-card {
        margin: 10px 0 !important;
        padding: 15px !important;
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box !important;
    }
    
    .dashboard-card h3,
    .settings-section h3 {
        font-size: 1.1rem !important;
    }
    
    .section-header {
        padding: 15px !important;
    }
    
    .section-content {
        padding: 15px !important;
    }
    
    .settings-header {
        width: 95% !important;
        max-width: 100% !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .header-left h1 {
        font-size: 1.4rem !important;
    }
    
    .header-left h2 {
        font-size: 1.1rem !important;
    }
    
    .header-stats {
        flex-wrap: wrap !important;
        gap: 10px !important;
        justify-content: center !important;
    }
    
    .stat-card {
        min-width: 70px !important;
        padding: 12px !important;
    }
    
    .stat-number {
        font-size: 1.2rem !important;
    }
    
    .stat-label {
        font-size: 0.8rem !important;
    }
    
    /* ============================== */
    /*    10. HOME MANAGEMENT         */
    /* ============================== */
    
    .home-selection-container,
    .home-settings-container {
        max-width: 100% !important;
        padding: 10px !important;
    }
    
    .home-cards-grid {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
    }
    
    .home-card {
        padding: 15px !important;
        margin: 10px 0 !important;
    }
    
    .home-card-header {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 10px !important;
    }
    
    .home-card-title {
        font-size: 1.1rem !important;
    }
    
    .home-card-actions {
        width: 100% !important;
        flex-direction: column !important;
        gap: 8px !important;
    }
    
    .home-card-actions button {
        width: 100% !important;
    }
    
    .home-footer {
        flex-direction: column !important;
        gap: 10px !important;
    }
    
    .home-footer-actions {
        width: 100% !important;
        flex-direction: column !important;
        gap: 8px !important;
    }
    
    .leave-home-btn,
    .settings-btn {
        width: 100% !important;
        padding: 10px !important;
    }
    
    /* User Management in Settings */
    .user-management {
        display: flex !important;
        flex-direction: column !important;
        gap: 15px !important;
        width: 100% !important;
        max-width: 100% !important;
    }
    
    .user-management.two-column {
        grid-template-columns: 1fr !important;
    }
    
    .invitation-section,
    .current-users-section {
        padding: 15px !important;
        width: 100% !important;
    }
    
    .user-form {
        min-width: 0 !important;
        width: 100% !important;
        padding: 15px !important;
        margin: 0 !important;
    }
    
    .user-form input,
    .user-form select,
    .user-form button {
        width: 100% !important;
    }
    
    /* ============================== */
    /*    11. ROOMS & CONTROLS        */
    /* ============================== */
    
    .rooms-container {
        width: 95% !important;
        max-width: 100% !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .rooms-container.wide {
        width: 95% !important;
    }
    
    .temp-cont {
        width: 95% !important;
        max-width: 100% !important;
        flex-direction: column !important;
        font-size: 0.9em !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .temp-container {
        width: 95% !important;
        max-width: 100% !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .salon-temp {
        flex-direction: column !important;
        align-items: center !important;
    }
    
    .lights-container {
        width: 95% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .lights-room-container {
        width: 95% !important;
        max-width: 100% !important;
        min-width: 0 !important;
        padding: 15px !important;
        flex-direction: column !important;
    }
    
    .light-control {
        flex-direction: row !important;
        justify-content: space-between !important;
        padding: 12px !important;
        width: 100% !important;
    }
    
    .light-control label {
        font-size: 0.9em !important;
    }
    
    .control-item {
        padding: 12px !important;
        margin: 8px 0 !important;
    }
    
    .control-header {
        flex-direction: column !important;
        gap: 10px !important;
    }
    
    .control-header span {
        font-size: 1em !important;
    }
    
    .control-content {
        flex-wrap: wrap !important;
        justify-content: center !important;
    }
    
    .control-panel > div[style*="grid-template-columns"] {
        display: flex !important;
        flex-direction: column !important;
        gap: 15px !important;
    }
    
    /* Switch Controls */
    .switch {
        transform: scale(0.9) !important;
    }
    
    #statShow,
    #tempShow {
        margin-left: 0 !important;
    }
    
    /* ============================== */
    /*    12. DASHBOARD               */
    /* ============================== */
    
    .dashboard-container {
        padding: 10px !important;
        width: 100% !important;
    }
    
    .chart-container {
        height: 180px !important;
        font-size: 0.85em !important;
    }
    
    .stat-row {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 5px !important;
    }
    
    .stat-label,
    .stat-value {
        font-size: 0.9em !important;
    }
    
    /* ============================== */
    /*    13. USER PROFILE            */
    /* ============================== */
    
    .user-profile-container {
        max-width: 100% !important;
        width: 95% !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .profile-section {
        gap: 1.5rem !important;
        width: 100% !important;
    }
    
    .profile-picture-section {
        gap: 1rem !important;
        width: 100% !important;
    }
    
    .profile-picture-container {
        width: 120px !important;
        height: 120px !important;
    }
    
    .register-profile-container {
        width: 95% !important;
        max-width: 100% !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .register-profile-container .profile-picture-container {
        width: 110px !important;
        height: 110px !important;
    }
    
    /* ============================== */
    /*    14. INVITE SYSTEM           */
    /* ============================== */
    
    .invite-container {
        max-width: 95% !important;
        width: 95% !important;
        margin: 15px auto !important;
        padding: 20px !important;
    }
    
    .invite-header h1 {
        font-size: 1.4rem !important;
    }
    
    .invite-icon {
        font-size: 48px !important;
    }
    
    .invite-details {
        padding: 15px !important;
    }
    
    .invite-detail-row {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 5px !important;
    }
    
    .auth-buttons {
        flex-direction: column !important;
        width: 100% !important;
        gap: 10px !important;
    }
    
    .btn-auth,
    .btn-accept {
        width: 100% !important;
        padding: 12px !important;
    }
    
    /* ============================== */
    /*    15. KANBAN / DRAG & DROP    */
    /* ============================== */
    
    .drag-container {
        max-width: 100% !important;
        padding: 10px !important;
        margin: 10px 0 !important;
    }
    
    .drag-list {
        display: block !important;
        flex-direction: column !important;
        width: 100% !important;
    }
    
    .kanban-column {
        min-width: 0 !important;
        width: 95% !important;
        max-width: 100% !important;
        margin: 10px auto !important;
        padding: 15px !important;
    }
    
    .kanban-column-header {
        padding: 12px !important;
    }
    
    .kanban-column-header h3 {
        font-size: 1em !important;
    }
    
    .kanban-card {
        width: 95% !important;
        height: auto !important;
        min-height: 80px !important;
        padding: 15px !important;
        margin: 10px auto !important;
    }
    
    .kanban-card-content {
        font-size: 0.95em !important;
    }
    
    .kanban-edit-btn,
    .kanban-remove-btn,
    .kanban-cancel-btn,
    .kanban-add-btn {
        width: 40px !important;
        height: 40px !important;
        font-size: 1.2em !important;
    }
    
    .edit-room-button {
        font-size: 1.2em !important;
        padding: 10px !important;
    }
    
    /* ============================== */
    /*    16. LISTS & CHECK-LISTS     */
    /* ============================== */
    
    .check-list,
    .list-container {
        width: 100% !important;
    }
    
    .check-list li,
    .list-item {
        padding: 10px !important;
        flex-wrap: wrap !important;
    }
    
    .list-item-content {
        max-width: 70% !important;
        font-size: 0.9em !important;
    }
    
    /* ============================== */
    /*    17. MODALS & POPUPS         */
    /* ============================== */
    
    .modal,
    .popup {
        width: 95% !important;
        max-width: 95vw !important;
        margin: 10px auto !important;
        padding: 15px !important;
    }
    
    .modal-content {
        padding: 15px !important;
    }
    
    .modal-header h2,
    .popup-header h2 {
        font-size: 1.2rem !important;
    }
    
    /* ============================== */
    /*    18. NOTIFICATIONS           */
    /* ============================== */
    
    .notification,
    .alert {
        width: 95% !important;
        max-width: 95vw !important;
        margin: 10px auto !important;
        padding: 12px !important;
        font-size: 0.9em !important;
    }
    
    /* ============================== */
    /*    19. MAP & MEDIA             */
    /* ============================== */
    
    #map {
        height: 250px !important;
        width: 100% !important;
        margin: 10px 0 !important;
    }
    
    .map-container {
        width: 100% !important;
        height: 250px !important;
        padding: 0 !important;
    }
    
    /* ============================== */
    /*    20. WEATHER WIDGET          */
    /* ============================== */
    
    .weather-widget {
        width: 95% !important;
        margin: 10px auto !important;
        padding: 15px !important;
    }
    
    .weather-info {
        font-size: 0.9em !important;
    }
    
    .temperature-display {
        font-size: 1.8em !important;
    }
    
    /* ============================== */
    /*    21. 404 ERROR PAGE          */
    /* ============================== */
    
    .wrapper .text_group {
        flex: 0 0 100% !important;
        margin: 0 !important;
        align-items: center !important;
    }
    
    .wrapper .text_group .text_lost {
        width: 100% !important;
        padding: 0 15px !important;
        font-size: 1.5em !important;
        line-height: 30px !important;
    }
    
    .wrapper .window_group {
        flex: 0 0 100% !important;
        margin-top: 0 !important;
        margin-left: 0 !important;
    }
    
    .wrapper .window_group .window_404 {
        margin-left: 50% !important;
        transform: translateX(-50%) !important;
        margin-top: 20px !important;
    }
    
    /* ============================== */
    /*    22. ROLE BADGES             */
    /* ============================== */
    
    .role-badge {
        font-size: 0.75em !important;
        padding: 3px 8px !important;
    }
    
    /* ============================== */
    /*    23. UTILITIES               */
    /* ============================== */
    
    .text-center {
        text-align: center !important;
    }
    
    .hidden-mobile {
        display: none !important;
    }
    
    .visible-mobile {
        display: block !important;
    }
    
    /* Prevent horizontal overflow */
    * {
        max-width: 100vw !important;
    }
    
    /* Ensure touch-friendly spacing */
    a,
    button,
    input,
    select,
    textarea {
        min-height: 44px !important;
        min-width: 44px !important;
    }

    /* Tables should scroll horizontally if needed */
    table {
        display: block !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }
    
    /* Fix for specific edge cases */
    .action > * {
        display: block !important;
        width: 100% !important;
    }
    
    /* Input groups */
    .input-group {
        flex-direction: column !important;
        gap: 8px !important;
        width: 100% !important;
    }
    
    /* Ensure proper box-sizing everywhere */
    *,
    *::before,
    *::after {
        box-sizing: border-box !important;
    }
    
}

