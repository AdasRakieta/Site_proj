{% extends "base.html" %}

{% block title %}SmartHome - Strona Główna{% endblock %}
{% block header %}Strona Główna{% endblock %}



{% block content %}
    <!-- Karta zarządzania domami -->
    <div class="home-management-card">
        <div class="card-header">
            <h3>🏠 {{ current_home.name if current_home else 'Nie wybrano domu' }}</h3>
            <p class="current-home-info">
                {% if current_home %}
                    Zarządzasz obecnie domem: <strong>{{ current_home.name }}</strong>
                {% else %}
                    Wybierz dom, którym chcesz zarządzać
                {% endif %}
            </p>
        </div>
        <div class="card-actions">
            <a href="/home/select" class="quick-action-btn">
                <span class="action-icon">🏠</span>
                <span class="action-text">Zarządzaj domami</span>
            </a>
            {% if current_home %}
            <div class="home-stats-quick">
                <span class="stat-item">{{ current_home.room_count or 0 }} pokoi</span>
                <span class="stat-item">{{ current_home.device_count or 0 }} urządzeń</span>
            </div>
            {% endif %}
        </div>
    </div>

    <h3 style="margin-bottom: 25px;">Wybierz pokój, którym chcesz sterować</h3>
    <div class="rooms-container" id="roomSelect">
        <!-- Rooms will be dynamically added here -->
    </div>
    <div id="tempNow" class="temp-cont" style="text-wrap: nowrap;">
        <label>Aktualna Temperatura w </label>
        <label id="statShow"></label>
        <label id="tempShow">Ładowanie...</label>
    </div>
    <button id="toggleMap"  class="map-button">Pokaż mapę</button>
    <div id="map-container" style="display: none;">
        <h3>Nasze miejsca</h3>
        <div id="map"></div>
    </div>
{% endblock %}

{% block scripts %}
<!-- Preloaded rooms data -->
<script id="preloadedRooms" type="application/json">{{ rooms | tojson | safe }}</script>

<!-- Load home page JavaScript -->
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock %}