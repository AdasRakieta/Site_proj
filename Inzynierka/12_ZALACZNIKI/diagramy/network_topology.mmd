---
config:
  theme: dark
---
graph TD
  Client1["Client: Browser/Mobile"]
  Internet(("Internet"))
  RevProxy["Nginx Reverse Proxy<br/>(HTTPS termination)"]
  App["Flask App<br/>Socket.IO"]
  DB[("PostgreSQL")]
  Cache[("Redis")]
  SMTP[("SMTP Server")]

  Client1 -->|TLS| Internet
  Internet -->|TLS| RevProxy
  RevProxy -->|internal HTTP| App
  App -->|SQL| DB
  App -->|cache| Cache
  App -->|SMTP| SMTP

  subgraph DockerHost[Docker Host]
    RevProxy
    App
    DB
    Cache
  end

  subgraph SecurityZones[Security Zones]
    Z1[Public Zone]
    Z2[DMZ / Reverse Proxy]
    Z3[Internal App Network]
  end

  classDef zone fill:#f8sf8f8,stroke:#ccc,stroke-dasharray:3
  class Z1,Z2,Z3 zone
